<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Traductor con Voz</title>
<style>
body {
    font-family: Arial, sans-serif;
    background: #111;
    color: #fff;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
}
.container {
    width: 400px;
    background: #1c1c1c;
    padding: 20px;
    border-radius: 10px;
}
textarea, select, button {
    width: 100%;
    margin-top: 10px;
    padding: 8px;
    border-radius: 5px;
    border: none;
}
button {
    background: #4CAF50;
    color: #fff;
    cursor: pointer;
}
.output {
    margin-top: 15px;
    background: #000;
    padding: 10px;
    border-radius: 5px;
}
</style>
</head>
<body>

<div class="container">
    <h2>Traductor con Voz</h2>

    <textarea id="inputText" placeholder="Escribe tu texto aquí..."></textarea>

    <select id="lang">
        <option value="en">Inglés</option>
        <option value="es">Español</option>
        <option value="fr">Francés</option>
        <option value="de">Alemán</option>
        <option value="it">Italiano</option>
        <option value="pt">Portugués</option>
        <option value="ja">Japonés</option>
        <option value="ko">Coreano</option>
        <option value="zh-CN">Chino</option>
    </select>

    <button onclick="traducir()">Traducir y hablar</button>

    <div class="output" id="outputText"></div>
</div>

<script>
async function traducir() {
    const text = document.getElementById("inputText").value;
    const lang = document.getElementById("lang").value;

    if (!text) return;

    const url = `https://translate.googleapis.com/translate_a/single?client=gtx&sl=auto&tl=${lang}&dt=t&q=${encodeURIComponent(text)}`;

    const res = await fetch(url);
    const data = await res.json();

    const translated = data[0].map(item => item[0]).join("");

    document.getElementById("outputText").innerText = translated;

    hablar(translated, lang);
}

function hablar(texto, idioma) {
    const speech = new SpeechSynthesisUtterance(texto);
    speech.lang = idioma;
    speech.rate = 1;
    speech.pitch = 1;
    window.speechSynthesis.speak(speech);
}
</script>

</body>
</html>
